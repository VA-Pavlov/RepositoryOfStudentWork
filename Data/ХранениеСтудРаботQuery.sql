CREATE DATABASE ATT;
Go
Use ATT;
Go
CREATE TABLE Teachers
(
	Id INT IDENTITY(1,1) PRIMARY KEY NOT NULL,
	Login NVARCHAR(30) NULL UNIQUE,
	Password NVARCHAR(40) NULL,
	FirstName NVARCHAR(20) NOT NULL,
	Surname NVARCHAR(20) NOT NULL,
	SecondName NVARCHAR(20) NULL
);
GO
CREATE TABLE Departaments
(
	Id INT IDENTITY(1,1) PRIMARY KEY NOT NULL,
	Name NVARCHAR(30) NOT NULL UNIQUE
);
GO
CREATE TABLE Groups
(
	Id INT IDENTITY(1,1) PRIMARY KEY NOT NULL,
	Name NVARCHAR(30) NOT NULL UNIQUE,
	Departament INT NULL
	FOREIGN KEY (Departament) REFERENCES Departaments(Id)
);
GO
CREATE TABLE Students
(
	Id INT IDENTITY(1,1) PRIMARY KEY NOT NULL,
	FirstName NVARCHAR(20) NOT NULL,
	Surname NVARCHAR(20) NOT NULL,
	SecondName NVARCHAR(20) NULL,
	GroupNumber INT NOT NULL,
	FOREIGN KEY (GroupNumber) REFERENCES Groups(Id)
);
GO
CREATE TABLE TypeOfStudentWork
(
	Id INT IDENTITY(1,1) PRIMARY KEY NOT NULL,
	Name NVARCHAR(30) NOT NULL UNIQUE,
	Description Nvarchar(100) NULL 
)
GO
CREATE TABLE StudentWorks
(
	Id INT IDENTITY(1,1) PRIMARY KEY NOT NULL,
	Name NVARCHAR(30) NOT NULL,
	DateOfDefense Date NULL,
	Grade INT NULL,
	TypeOfWork INT NOT NULL,
	FOREIGN KEY (TypeOfWork) REFERENCES TypeOfStudentWork(Id),
	Teacher INT NOT NULL,
	FOREIGN KEY (Teacher) REFERENCES Teachers(Id),
	Student INT NOT NULL,
	FOREIGN KEY (Student) REFERENCES Students(Id)
);
GO